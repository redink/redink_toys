-module(bubblesort).

-export([sort/1]).

sort([] = L) ->
	L;
sort([_] = L) ->
	L;
sort(L) ->
	sort(L, [], []).

sort([], [], Res) ->
	Res;
sort([], Tmp, Res) ->
	[Sorted | Other] = Tmp,
	sort(lists:reverse(Other), [], [Sorted | Res]);
sort([X], Tmp, Res) ->
	sort(lists:reverse(Tmp), [], [X | Res]);
sort([X, Y | T], Tmp, Res) when X > Y ->
	sort([X | T], [Y | Tmp], Res);
sort([X | T], Tmp, Res) ->
	sort(T, [X | Tmp], Res).

% 2> bubblesort:sort([4,3,7,1,2,9]).
% [1,2,3,4,7,9]
% <0.35.0> bubblesort:sort([4, 3, 7, 1, 2, 9])
% <0.35.0> | bubblesort:sort([4, 3, 7, 1, 2, 9], [], [])
% <0.35.0> | | bubblesort:sort([4, 7, 1, 2, 9], [3], [])
% <0.35.0> | | | bubblesort:sort([7, 1, 2, 9], [4, 3], [])
% <0.35.0> | | | | bubblesort:sort([7, 2, 9], [1, 4, 3], [])
% <0.35.0> | | | | | bubblesort:sort([7, 9], [2, 1, 4, 3], [])
% <0.35.0> | | | | | | bubblesort:sort([9], [7, 2, 1, 4, 3], [])
% <0.35.0> | | | | | | | bubblesort:sort([3, 4, 1, 2, 7], [], [9])
% <0.35.0> | | | | | | | | bubblesort:sort([4, 1, 2, 7], [3], [9])
% <0.35.0> | | | | | | | | | bubblesort:sort([4, 2, 7], [1, 3], [9])
% <0.35.0> | | | | | | | | | | bubblesort:sort([4, 7], [2, 1, 3], [9])
% <0.35.0> | | | | | | | | | | | bubblesort:sort([7], [4, 2, 1, 3], [9])
% <0.35.0> | | | | | | | | | | | | bubblesort:sort([3, 1, 2, 4], [], [7, 9])
% <0.35.0> | | | | | | | | | | | | | bubblesort:sort([3, 2, 4], [1], [7, 9])
% <0.35.0> | | | | | | | | | | | | | | bubblesort:sort([3, 4], [2, 1], [7, 9])
% <0.35.0> | | | | | | | | | | | | | | | bubblesort:sort([4], [3, 2, 1], [7, 9])
% <0.35.0> | | | | | | | | | | | | | | | | bubblesort:sort([1, 2, 3], [], [4, 7, 9])
% <0.35.0> | | | | | | | | | | | | | | | | | bubblesort:sort([2, 3], [1], [4, 7, 9])
% <0.35.0> | | | | | | | | | | | | | | | | | | bubblesort:sort([3], [2, 1], [4, 7, 9])
% <0.35.0> | | | | | | | | | | | | | | | | | | | bubblesort:sort([1, 2], [], [3, 4, 7, 9])
% <0.35.0> | | | | | | | | | | | | | | | | | | | | bubblesort:sort([2], [1], [3, 4, 7, 9])
% <0.35.0> | | | | | | | | | | | | | | | | | | | | | bubblesort:sort([1], [], [2, 3, 4, 7, 9])
% <0.35.0> | | | | | | | | | | | | | | | | | | | | | | bubblesort:sort([], [], [1, 2, 3, 4, 7, 9])
% <0.35.0> | | | | | | | | | | | | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | | [1,2,3,4,7,9]
% <0.35.0> | | | | [1,2,3,4,7,9]
% <0.35.0> | | | [1,2,3,4,7,9]
% <0.35.0> | | [1,2,3,4,7,9]
% <0.35.0> | [1,2,3,4,7,9]
% <0.35.0> [1,2,3,4,7,9]
